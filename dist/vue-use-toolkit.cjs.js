"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),t=function(e){var t=function(){return e?window.localStorage:window.sessionStorage};return{getStorage:function(e){if(!e||!t())return"";try{var n=t().getItem(e)||"";return JSON.parse(n)}catch(e){return""}},setStorage:function(e,n){if(t())return t().setItem(e,JSON.stringify(n))},removeStorage:function(e){if(t())return t().removeItem(e)},clearStorage:function(){if(t)return t().clear()}}},n="undefined"!=typeof window;function o(e){return n?requestAnimationFrame(e):-1}exports.useCountDown=function(t){var r,u,a,i,c=e.ref(t.time),f=e.computed((function(){return{total:e=c.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),l=function(){var e;a=!1,e=r,n&&cancelAnimationFrame(e)},s=function(){return Math.max(u-Date.now(),0)},v=function(e){var n,o;c.value=e,null===(n=t.onChange)||void 0===n||n.call(t,f.value),0===e&&(l(),null===(o=t.onFinish)||void 0===o||o.call(t))},d=function(){r=o((function(){a&&(v(s()),c.value>0&&d())}))},m=function(){r=o((function(){if(a){var e=s();t=e,n=c.value,(Math.floor(t/1e3)!==Math.floor(n/1e3)||0===e)&&v(e),c.value>0&&m()}var t,n}))},g=function(){n&&(t.millisecond?d():m())};return e.onBeforeUnmount(l),e.onActivated((function(){i&&(a=!0,i=!1,g())})),e.onDeactivated((function(){a&&(l(),i=!0)})),{start:function(){a||(u=Date.now()+c.value,a=!0,g())},pause:l,reset:function(e){void 0===e&&(e=t.time),l(),c.value=e},current:f}},exports.useLocalStorage=function(){return t(!0)},exports.useSessionStorage=function(){return t(!1)},exports.useStorage=t;
