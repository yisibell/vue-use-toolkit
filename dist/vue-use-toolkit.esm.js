import{ref as n,computed as t,onBeforeUnmount as e,onActivated as r,onDeactivated as o}from"vue";var u=function(n){var t=function(){return n?window.localStorage:window.sessionStorage};return{getStorage:function(n){if(!n||!t())return"";try{var e=t().getItem(n)||"";return JSON.parse(e)}catch(n){return""}},setStorage:function(n,e){if(t())return t().setItem(n,JSON.stringify(e))},removeStorage:function(n){if(t())return t().removeItem(n)},clearStorage:function(){if(t)return t().clear()}}},a=function(){return u(!1)},i=function(){return u(!0)},f="undefined"!=typeof window;function c(n){return f?requestAnimationFrame(n):-1}var l=function(u){var a,i,l,v,s=n(u.time),m=t((function(){return{total:n=s.value,days:Math.floor(n/864e5),hours:Math.floor(n%864e5/36e5),minutes:Math.floor(n%36e5/6e4),seconds:Math.floor(n%6e4/1e3),milliseconds:Math.floor(n%1e3)};var n})),d=function(){var n;l=!1,n=a,f&&cancelAnimationFrame(n)},h=function(){return Math.max(i-Date.now(),0)},g=function(n){var t,e;s.value=n,null===(t=u.onChange)||void 0===t||t.call(u,m.value),0===n&&(d(),null===(e=u.onFinish)||void 0===e||e.call(u))},w=function(){a=c((function(){l&&(g(h()),s.value>0&&w())}))},M=function(){a=c((function(){if(l){var n=h();t=n,e=s.value,(Math.floor(t/1e3)!==Math.floor(e/1e3)||0===n)&&g(n),s.value>0&&M()}var t,e}))},S=function(){f&&(u.millisecond?w():M())};return e(d),r((function(){v&&(l=!0,v=!1,S())})),o((function(){l&&(d(),v=!0)})),{start:function(){l||(i=Date.now()+s.value,l=!0,S())},pause:d,reset:function(n){void 0===n&&(n=u.time),d(),s.value=n},current:m}};export{l as useCountDown,i as useLocalStorage,a as useSessionStorage,u as useStorage};
